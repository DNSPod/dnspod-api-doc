<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>API说明 &mdash; DNSPod API Doc 1.0.0 documentation</title>
    
    <link rel="stylesheet" href="_static/default.css" type="text/css" />
    <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    './',
        VERSION:     '1.0.0',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="_static/jquery.js"></script>
    <script type="text/javascript" src="_static/underscore.js"></script>
    <script type="text/javascript" src="_static/doctools.js"></script>
    <script type="text/javascript" src="http://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
    <link rel="top" title="DNSPod API Doc 1.0.0 documentation" href="index.html" />
    <link rel="next" title="帐户相关" href="accounts.html" />
    <link rel="prev" title="DNSPod用户API文档" href="index.html" /> 
  </head>
  <body>  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body">
            
  <div class="section" id="api">
<h1>API说明<a class="headerlink" href="#api" title="Permalink to this headline">¶</a></h1>
<div class="section" id="id1">
<h2>API开发规范<a class="headerlink" href="#id1" title="Permalink to this headline">¶</a></h2>
<ol class="arabic">
<li><dl class="first docutils">
<dt>关于滥用：</dt>
<dd><dl class="first docutils">
<dt>以下这些，但并不限于以下这些行为都被视为滥用：</dt>
<dd><ul class="first last simple">
<li>短时间内大量添加、删除、修改、刷新域名或者记录，或者设置记录状态。</li>
<li>记录内容没有任何改变的刷新，比如动态DNS中IP没变也请求修改记录。</li>
<li>程序逻辑不严谨、程序死循环等等，可能造成大量无效、重复的请求。</li>
<li>其它没有提到的，但会给系统带来压力的请求行为。</li>
</ul>
</dd>
</dl>
<p class="last">为了保障您和广大开发者的利益，请您合理使用API，对于任何滥用API的行为，DNSPod有权对此进行封禁，并保留最终解释权。</p>
</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt>禁止登录：</dt>
<dd><p class="first last">如果账号尝试登录错误次数在5分钟内超过30次则会被禁止登录一个小时，写程序的时候特别是动态客户端的时候必须判断是否登录成功，如果不成功必须马上停止尝试。如果使用动态客户端，在网页上修改了密码后务必到客户端修改，否则将不可用。</p>
</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt>关于封禁：</dt>
<dd><p class="first last">由于滥用API将会导致账号在API中封禁，但并不影响在官方网站上的使用，封禁一定的时间后会自动解除，一般需要一个小时后才会解封，所以请小心操作，不要拿API进行大量测试。</p>
</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt>请求地址：</dt>
<dd><p class="first last">请求的地址为 <a class="reference external" href="https://dnsapi.cn/">https://dnsapi.cn/</a> 开头的地址，基于SSL安全传输。为了安全必须用https开头的地址，否则将有可能被封禁。</p>
</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt>请求方法：</dt>
<dd><p class="first last">只支持POST方法请求数据，用其它方法会提示相关错误。</p>
</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt>关于编码：</dt>
<dd><p class="first last">请用UTF-8编码进行数据传输，返回的数据也是UTF-8编码的。</p>
</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt>关于UserAgent：</dt>
<dd><ul class="first last simple">
<li>请求的时候必须设置UserAgent，如果不设置或者设置为不合法的（比如设置为浏览器的）也会导致账号被封禁API。</li>
<li>UserAgent的格式必须为：程序英文名称/版本(联系邮箱)，比如：MJJ DDNS Client/1.0.0 (<a class="reference external" href="mailto:shallwedance&#37;&#52;&#48;126&#46;com">shallwedance<span>&#64;</span>126<span>&#46;</span>com</a>)。</li>
</ul>
</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt>关于安全：</dt>
<dd><p class="first last">用户需要输入用户邮箱和密码才能进行下一步的操作，如果需要在客户端上或数据库中保存用户的信息，必须加密后保存，不得明文保存在文件中。</p>
</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt>技术支持：</dt>
<dd><ul class="first last simple">
<li>帮助中心：<a class="reference external" href="https://support.dnspod.cn/">https://support.dnspod.cn/</a></li>
<li>DNSPod开发者讨论群：176455159</li>
</ul>
</dd>
</dl>
</li>
</ol>
</div>
<div class="section" id="id2">
<h2>公共参数<a class="headerlink" href="#id2" title="Permalink to this headline">¶</a></h2>
<dl class="docutils">
<dt>所有的接口都需要这些参数，在此统一说明，下面的接口将不再列出。这些参数必须和接口参数一起提交。</dt>
<dd><ul class="first last simple">
<li>login_email 用户帐号，必选</li>
<li>login_password 用户密码，必选</li>
<li>format {json,xml} 返回的数据格式，可选，默认为xml，建议用json</li>
<li>lang {en,cn} 返回的错误语言，可选，默认为en，建议用cn</li>
<li>error_on_empty {yes,no} 没有数据时是否返回错误，可选，默认为yes，建议用no</li>
<li>user_id 用户的ID，可选，仅代理接口需要， 用户接口不需要提交此参数</li>
</ul>
</dd>
</dl>
</div>
<div class="section" id="id3">
<h2>共通返回<a class="headerlink" href="#id3" title="Permalink to this headline">¶</a></h2>
<dl class="docutils">
<dt>这些返回在所有的接口都有可能返回，它们是所有接口共通的，在此统一说明，下面的接口将不再列出。另外，文档中的参考返回只列出JSON格式的，XML格式类似，就不再列出了。</dt>
<dd><ul class="first last simple">
<li>-1 登陆失败</li>
<li>-2 API使用超出限制</li>
<li>-3 不是合法代理 (仅用于代理接口)</li>
<li>-4 不在代理名下 (仅用于代理接口)</li>
<li>-7 无权使用此接口</li>
<li>-8 登录失败次数过多，账号被暂时封禁</li>
<li>-99 此功能暂停开放，请稍候重试</li>
<li>1 操作成功</li>
<li>2 只允许POST方法</li>
<li>3 未知错误</li>
<li>6 用户ID错误 (仅用于代理接口)</li>
<li>7 用户不在您名下 (仅用于代理接口)</li>
</ul>
</dd>
</dl>
</div>
<div class="section" id="d">
<h2>D令牌验证相关<a class="headerlink" href="#d" title="Permalink to this headline">¶</a></h2>
<dl class="docutils">
<dt>对于已经开启D令牌的用户，在请求API时需要增加如下两个参数：</dt>
<dd><ul class="first last simple">
<li>login_code D令牌生成的随机验证码，必选</li>
<li>login_remember {yes,no} 是否记住验证码，可选，默认为yes</li>
</ul>
</dd>
</dl>
<p>说明：由于D令牌的随机码每30秒变换一次，所以建议用户在第一次请求API的时候选择记住验证码。选择记住验证码后，除了返回所请求的数据以外，还会发一个名为&#8217;t&#8217; + user_id 的cookie，形如：t123456，该cookie的有效期为1个月，以后再请求API可以带上这个cookie，而无须再提交login_code和login_remember参数。</p>
<dl class="docutils">
<dt>对于开启了D令牌的用户，某些重要操作可能会返回以下错误码，在此统一说明，下面的接口将不再列出。</dt>
<dd><ul class="first last simple">
<li>50 您开启了D令牌，需要验证码</li>
<li>51 没有开启D令牌</li>
<li>52 验证码不正确</li>
<li>53 您已经开启了D令牌</li>
<li>54 域名所有者开启了D令牌，您也需要开启D令牌才能管理该域名</li>
</ul>
</dd>
</dl>
</div>
<div class="section" id="id4">
<h2>获取API版本号<a class="headerlink" href="#id4" title="Permalink to this headline">¶</a></h2>
<dl class="docutils">
<dt>接口地址：</dt>
<dd><ul class="first last simple">
<li><a class="reference external" href="https://dnsapi.cn/Info.Version">https://dnsapi.cn/Info.Version</a></li>
</ul>
</dd>
<dt>HTTP请求方式：</dt>
<dd><ul class="first last simple">
<li>POST</li>
</ul>
</dd>
<dt>请求参数：</dt>
<dd><ul class="first last simple">
<li>公共参数</li>
</ul>
</dd>
<dt>响应代码：</dt>
<dd><ul class="first last simple">
<li>共通返回</li>
</ul>
</dd>
</dl>
<p>示例:</p>
<div class="highlight-python"><pre>curl -X POST https://dnsapi.cn/Info.Version -d 'login_email=api@dnspod.com&amp;login_password=password&amp;format=json'</pre>
</div>
<p>返回参考：</p>
<blockquote>
<div><ul>
<li><p class="first">JSON:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="p">{</span>
    <span class="s">&quot;status&quot;</span><span class="p">:</span> <span class="p">{</span>
        <span class="s">&quot;code&quot;</span><span class="p">:</span> <span class="s">&quot;1&quot;</span><span class="p">,</span>
        <span class="s">&quot;message&quot;</span><span class="p">:</span> <span class="s">&quot;4.6&quot;</span><span class="p">,</span>
        <span class="s">&quot;created_at&quot;</span><span class="p">:</span> <span class="s">&quot;2012-09-10 11:20:39&quot;</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
</li>
</ul>
</div></blockquote>
</div>
</div>


          </div>
        </div>
      </div>
      <div class="sphinxsidebar">
        <div class="sphinxsidebarwrapper">
            <p class="logo"><a href="index.html">
              <img class="logo" src="_static/logo.png" alt="Logo"/>
            </a></p>
  <h3><a href="index.html">Table Of Contents</a></h3>
  <ul>
<li><a class="reference internal" href="#">API说明</a><ul>
<li><a class="reference internal" href="#id1">API开发规范</a></li>
<li><a class="reference internal" href="#id2">公共参数</a></li>
<li><a class="reference internal" href="#id3">共通返回</a></li>
<li><a class="reference internal" href="#d">D令牌验证相关</a></li>
<li><a class="reference internal" href="#id4">获取API版本号</a></li>
</ul>
</li>
</ul>

  <h4>Previous topic</h4>
  <p class="topless"><a href="index.html"
                        title="previous chapter">DNSPod用户API文档</a></p>
  <h4>Next topic</h4>
  <p class="topless"><a href="accounts.html"
                        title="next chapter">帐户相关</a></p>
  <h3>This Page</h3>
  <ul class="this-page-menu">
    <li><a href="_sources/info.txt"
           rel="nofollow">Show Source</a></li>
  </ul>
<div id="searchbox" style="display: none">
  <h3>Quick search</h3>
    <form class="search" action="search.html" method="get">
      <input type="text" name="q" />
      <input type="submit" value="Go" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
    <p class="searchtip" style="font-size: 90%">
    Enter search terms or a module, class or function name.
    </p>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="footer">
        &copy; Copyright DNSPod Inc.
      Created using <a href="http://sphinx-doc.org/">Sphinx</a> 1.2b1.
    </div>
  </body>
</html>